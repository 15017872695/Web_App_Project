(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Shop"],{"3e59":function(e,a,t){"use strict";t.r(a);var o,n,c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"Shop"}},[e._m(0),t("div",{attrs:{id:"Shop_AMap"}}),t("div",{staticClass:"dingwei"},[t("div",{staticClass:"toolbar"},[t("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":"",shape:"round"},on:{search:e.onSearch,input:e.onSearch},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}},[t("div",{attrs:{slot:"action"},on:{click:e.onSearch},slot:"action"},[e._v("搜索")])])],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.hidePanel,expression:"hidePanel"}],attrs:{id:"panel"}})])},i=[function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",{staticClass:"Shop_Top"},[o("img",{attrs:{src:t("8d66"),alt:""}})])}],l=(t("386d"),t("28a5"),t("bd86")),s=(t("e17f"),t("2241")),r=(t("7f7f"),t("5852"),t("d961")),p=t("bc3a"),d=t.n(p);function u(){return new Promise((function(e,a){if(window.AMap)e(window.AMap);else{var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="http://webapi.amap.com/maps?v=1.3&callback=initAMap&key=d307680c36ddb1b64027d8ad2fa70f60",t.onerror=a,document.head.appendChild(t)}window.initAMap=function(){e(window.AMap)}}))}var h={name:"Shop",data:function(){return{map:null,thisPosition:{location:"",lng:"",lat:""},value:"",hidePanel:!1,rectangle:""}},components:(o={},Object(l["a"])(o,r["a"].name,r["a"]),Object(l["a"])(o,s["a"].Component.name,s["a"].Component),o),mounted:function(){this.init()},methods:{req_post:function(){console.log(this.rectangle);var e=this,a="http://restapi.amap.com/v3/batch?key=7168593a2164a8afa9599b39d46ba18d",t={ops:[{url:"/v3/place/around?offset=10&page=1&key=7168593a2164a8afa9599b39d46ba18d&location=".concat(e.rectangle,"&output=json&radius=100000&types=070000")},{url:"/v3/place/around?offset=10&page=1&key=7168593a2164a8afa9599b39d46ba18d&location=".concat(e.rectangle,"&output=json&radius=100000&types=070000")}]};d.a.post(a,t,{headers:{"Content-Type":"application/json"},method:"POST"}).then((function(e){console.log(e),console.log(e["data"][0]["body"]["pois"])})).catch((function(e){console.log(e)}))},init:function(){var e=this,a=this;u().then((function(t){console.log(t);var o=new t.Map("Shop_AMap",{center:[116.397428,39.90923],resizeEnable:!0,zoom:16,viewMode:"3D"});t.plugin(["AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PlaceSearch","AMap.Geolocation","AMap.Autocomplete","AMap.CitySearch"],(function(){var e,n=new t.Geolocation((e={enableHighAccuracy:!0,maximumAge:0,convert:!0,timeout:6e3,GeolocationFirst:!0},Object(l["a"])(e,"maximumAge",0),Object(l["a"])(e,"zoomToAccuracy",!0),Object(l["a"])(e,"buttonOffset",new t.Pixel(10,20)),Object(l["a"])(e,"showMarker",!0),Object(l["a"])(e,"showCircle",!0),Object(l["a"])(e,"panToLocation",!0),e));o.addControl(new t.ToolBar),o.addControl(new t.Scale),o.addControl(new t.OverView({isOpen:!0})),o.addControl(new t.MapType),o.addControl(n),n.getCurrentPosition();var c=new t.CitySearch;c.getLocalCity((function(e,t){"complete"===e&&"OK"===t.info&&(console.log(t),a.rectangle=t.rectangle.split(";")[1],s["a"].alert({title:"当前位置",message:t.province+"-"+t.city}).then((function(){})),a.req_post())}))})),t.service(["AMap.PlaceSearch"],(function(){n=new t.PlaceSearch({pageSize:0,pageIndex:1,citylimit:!1,map:o,panel:"panel",autoFitView:!0,renderStyle:"default"})})),t.event.addListener(n,"selectChanged",e.selectAddress)}))},onSearch:function(){if(""==this.value)return this.hidePanel=!1,!1;n.search(this.value),this.hidePanel=!0;var e={city:"深圳"},a=new AMap.Autocomplete(e);a.search(this.value,(function(e,a){console.log(a)}))},onCancel:function(){},selectAddress:function(e){var a=e.selected.data.location;console.log("lng",a.lng),console.log("lat",a.lat),this.hidePanel=!1},onComplete:function(e){var a=[];a.push("定位结果："+e.position),a.push("定位类别："+e.location_type),e.accuracy&&a.push("精度："+e.accuracy+" 米"),a.push("是否经过偏移："+(e.isConverted?"是":"否")),console.log(a),alert("定位成功"+a)},onError:function(e){console.log("定位失败"),console.log(e.message),alert("定位失败"+e.message)}},destroyed:function(){this.map&&this.map.destroy()}},f=h,m=(t("64e7"),t("2877")),v=Object(m["a"])(f,c,i,!1,null,"2216d8ca",null);a["default"]=v.exports},"64e7":function(e,a,t){"use strict";var o=t("9ad0"),n=t.n(o);n.a},"8d66":function(e,a,t){e.exports=t.p+"assets/img/ShopTopImg.68c757a5.jpg"},"9ad0":function(e,a,t){}}]);
//# sourceMappingURL=Shop.7f3d425e.js.map